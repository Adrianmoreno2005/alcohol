<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Alcoholemia</title>
    <link rel="icon" href="https://raw.githubusercontent.com/Adrianmoreno2005/alcohol/main/foto.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0e17;
            --card: #111826;
            --text: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #1e293b;
            --accent: #3b82f6;
            --ok: #22c55e;
            --warning: #eab308;
            --danger: #ef4444;
            --ig: linear-gradient(135deg, #833ab4, #fd1d1d, #fcb045);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .contenedor {
            background: var(--card);
            padding: 48px 36px;
            border-radius: 24px;
            max-width: 480px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0,0,0,0.6);
            border: 1px solid var(--border);
        }
        h2 {
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .subtitle {
            text-align: center;
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 36px;
            font-weight: 500;
        }
        label {
            display: block;
            margin: 24px 0 10px;
            font-weight: 600;
            font-size: 15px;
            color: var(--text-secondary);
        }
        input, select {
            width: 100%;
            padding: 16px 18px;
            background: #020617;
            border: 1px solid var(--border);
            border-radius: 14px;
            color: white;
            font-size: 17px;
            transition: all 0.3s ease;
        }
        input:focus, select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(59,130,246,0.3);
        }
        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 18px center;
        }
        button {
            width: 100%;
            padding: 18px;
            margin-top: 36px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 14px;
            font-size: 19px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        button:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }
        .opcion-extra {
            overflow: hidden;
            max-height: 0;
            transition: max-height 0.5s ease, opacity 0.4s ease, padding 0.4s ease;
            opacity: 0;
        }
        .opcion-extra.visible {
            max-height: 120px;
            opacity: 1;
            padding-top: 16px;
        }
        .resultado {
            margin-top: 40px;
            padding: 32px;
            border-radius: 20px;
            text-align: center;
            display: none;
            animation: fadeIn 0.6s forwards;
            border: 2px solid var(--border);
            background: rgba(0,0,0,0.3);
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .gauge-container {
            width: 240px;
            height: 140px;
            margin: 24px auto 32px;
            position: relative;
            overflow: hidden;
        }
        .gauge {
            width: 100%;
            height: 100%;
        }
        .barra-progreso {
            height: 16px;
            background: #1e293b;
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0 16px;
        }
        .progreso {
            height: 100%;
            width: 0%;
            transition: width 1s ease, background 0.8s ease;
        }
        .super-ok { border-color: var(--ok); background: rgba(34,197,94,0.15); }
        .ok { border-color: var(--ok); background: rgba(34,197,94,0.1); }
        .alerta { border-color: var(--warning); background: rgba(234,179,8,0.15); }
        .peligro { border-color: var(--danger); background: rgba(239,68,68,0.2); }
        .error { border-color: var(--danger); background: rgba(239,68,68,0.15); }
        .consejo { font-size: 16px; margin-top: 20px; font-weight: 600; }
        .nota {
            margin-top: 40px;
            font-size: 14px;
            color: var(--text-secondary);
            text-align: center;
            line-height: 1.7;
            padding: 20px;
            background: rgba(0,0,0,0.4);
            border-radius: 16px;
            border: 1px solid var(--border);
        }
        .instagram-btn {
            display: block;
            margin: 40px auto 0;
            padding: 18px 28px;
            background: var(--ig);
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 16px;
            font-weight: 700;
            font-size: 18px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
            max-width: 320px;
        }
        .instagram-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.6);
        }
    </style>
</head>
<body>
    <div class="contenedor">
        <h2>Calculadora de Alcoholemia</h2>
        <p class="subtitle">Espa√±a (diciembre 2025) ‚Äì L√≠mite general: 0.5 g/L | Noveles/profesionales: 0.3 g/L</p>
        <form id="formulario">
            <label for="peso">Peso (kg)</label>
            <input type="number" id="peso" min="40" max="150" step="0.5" required placeholder="Ej: 75">

            <label for="sexo">Sexo biol√≥gico</label>
            <select id="sexo" required>
                <option value="hombre">Hombre</option>
                <option value="mujer">Mujer</option>
            </select>

            <label for="tipo_bebida">Tipo de bebida</label>
            <select id="tipo_bebida" required>
                <option value="">Selecciona</option>
                <option value="cerveza">üç∫ Cerveza</option>
                <option value="vino">üç∑ Vino / Cava</option>
                <option value="cubata">ü•É Cubata / Combinado</option>
            </select>

            <div id="opcion_cerveza" class="opcion-extra">
                <label for="tipo_cerveza">Tama√±o</label>
                <select id="tipo_cerveza">
                    <option value="chica">Ca√±a / Tercero (33 cl)</option>
                    <option value="grande">Pinta / Jarra (50 cl)</option>
                </select>
            </div>

            <div id="opcion_cubata" class="opcion-extra">
                <label for="tipo_licor">Tipo de licor</label>
                <select id="tipo_licor">
                    <option value="ron">Ron (40%)</option>
                    <option value="whisky">Whisky (40%)</option>
                    <option value="vodka">Vodka (40%)</option>
                    <option value="ginebra">Ginebra (40%)</option>
                    <option value="otros">Otros (37-50%)</option>
                </select>
            </div>

            <label for="cantidad">N√∫mero de consumiciones</label>
            <input type="number" id="cantidad" min="0" max="40" step="0.5" required placeholder="Ej: 5">

            <label for="hora_ultima">Hora √∫ltimo trago (0-23)</label>
            <input type="number" id="hora_ultima" min="0" max="23" required placeholder="Ej: 3">

            <label for="hora_conduccion">Hora prevista de conducir (0-23)</label>
            <input type="number" id="hora_conduccion" min="0" max="23" required placeholder="Ej: 9">

            <button type="submit">Calcular</button>
        </form>

        <div id="resultado" class="resultado">
            <div class="gauge-container">
                <canvas id="gauge" class="gauge" width="240" height="140"></canvas>
            </div>
            <div id="texto-resultado" style="font-size: 22px; font-weight: 700;"></div>
            <div class="barra-progreso"><div id="progreso" class="progreso"></div></div>
        </div>

        <div class="nota">
            <strong>Importante:</strong> Estimaci√≥n aproximada. Factores como comida, fatiga o medicamentos influyen.<br>
            La √∫nica tasa segura para conducir es <strong>0.0 g/L</strong>.
        </div>

        <a href="https://www.instagram.com/adriaanmorenoo_05/" target="_blank" class="instagram-btn">
            S√≠gueme @adriaanmorenoo_05
        </a>
    </div>

<script>
    document.getElementById('tipo_bebida').addEventListener('change', function() {
        const bebida = this.value;
        document.getElementById('opcion_cerveza').classList.toggle('visible', bebida === 'cerveza');
        document.getElementById('opcion_cubata').classList.toggle('visible', bebida === 'cubata');
    });

    document.getElementById('formulario').addEventListener('submit', function(e) {
        e.preventDefault();
        const peso = parseFloat(document.getElementById('peso').value);
        const sexo = document.getElementById('sexo').value;
        const tipo = document.getElementById('tipo_bebida').value;
        const cantidad = parseFloat(document.getElementById('cantidad').value);
        const hora_ultima = parseInt(document.getElementById('hora_ultima').value);
        const hora_conduccion = parseInt(document.getElementById('hora_conduccion').value);

        if (!peso || !cantidad || !tipo || isNaN(hora_ultima) || isNaN(hora_conduccion)) {
            mostrarResultado('error', 'Rellena todos los campos correctamente.', 0);
            return;
        }

        let alcoholPorUnidad = 0;
        if (tipo === 'cerveza') {
            const esGrande = document.getElementById('tipo_cerveza').value === 'grande';
            alcoholPorUnidad = esGrande ? 20 : 13;
        } else if (tipo === 'vino') {
            alcoholPorUnidad = 12;
        } else if (tipo === 'cubata') {
            const licor = document.getElementById('tipo_licor').value;
            const graduacion = (licor === 'otros') ? 43 : 40;
            alcoholPorUnidad = Math.round((0.04 * graduacion * 0.789 * 100) * 10) / 10;
        }

        const alcoholTotal = alcoholPorUnidad * cantidad;
        const r = (sexo === 'hombre') ? 0.68 : 0.55;
        const bac_pico = alcoholTotal / (peso * r);
        let horas = hora_conduccion - hora_ultima;
        if (horas < 0) horas += 24;
        const eliminacionPorHora = 0.15;
        const bac = Math.max(0, bac_pico - (eliminacionPorHora * horas));
        const bac_red = bac.toFixed(3);

        let texto = '', clase = '', progreso = 0;
        if (bac <= 0.01) {
            texto = `Pr√°cticamente cero<br><strong>${bac_red} g/L</strong><br>Apto para conducir`;
            clase = 'super-ok';
            progreso = bac / 1.5 * 100;
        } else if (bac < 0.3) {
            texto = `Por debajo del l√≠mite estricto<br><strong>${bac_red} g/L</strong><br>OK para general`;
            clase = 'ok';
            progreso = bac / 1.5 * 100;
        } else if (bac < 0.5) {
            texto = `Superas l√≠mite noveles/profesionales<br><strong>${bac_red} g/L</strong><br>¬°No conduzcas si aplicable!`;
            clase = 'alerta';
            progreso = bac / 1.5 * 100;
        } else {
            texto = `POR ENCIMA DEL L√çMITE GENERAL<br><strong>${bac_red} g/L</strong><br>¬°PELIGRO! NO CONDUZCAS`;
            clase = 'peligro';
            progreso = 100;
        }

        if (bac > 0.3) {
            const horasNecesarias = Math.ceil((bac - 0.25) / eliminacionPorHora);
            texto += `<div class="consejo">Espera al menos <strong>${horasNecesarias} horas</strong> m√°s para bajar de 0.25 g/L.</div>`;
        }

        mostrarResultado(clase, texto, progreso);
        dibujarGauge(bac);
    });

    function mostrarResultado(clase, html, progresoPorc) {
        const div = document.getElementById('resultado');
        div.className = 'resultado ' + clase;
        document.getElementById('texto-resultado').innerHTML = html;
        document.getElementById('progreso').style.width = Math.min(100, progresoPorc) + '%';
        div.style.display = 'block';
    }

    function dibujarGauge(valor) {
        const canvas = document.getElementById('gauge');
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const centroX = canvas.width / 2;
        const centroY = canvas.height;
        const radio = 110;
        const inicio = Math.PI * 0.8;
        const finTotal = Math.PI * 2.2;

        // Fondo arco
        ctx.beginPath();
        ctx.arc(centroX, centroY, radio, inicio, finTotal);
        ctx.strokeStyle = '#1e293b';
        ctx.lineWidth = 28;
        ctx.stroke();

        // Arco progreso
        const maxBac = 1.5;
        let fin = inicio + (valor / maxBac) * (finTotal - inicio);
        let color = valor < 0.3 ? var(--ok) : (valor < 0.5 ? var(--warning) : var(--danger));

        ctx.beginPath();
        ctx.arc(centroX, centroY, radio, inicio, fin);
        ctx.strokeStyle = color;
        ctx.lineWidth = 28;
        ctx.lineCap = 'round';
        ctx.stroke();

        // Valor central
        ctx.font = 'bold 36px Inter';
        ctx.fillStyle = var(--text);
        ctx.textAlign = 'center';
        ctx.fillText(valor.toFixed(2), centroX, centroY - 20);

        ctx.font = '16px Inter';
        ctx.fillStyle = var(--text-secondary);
        ctx.fillText('g/L', centroX, centroY + 10);
    }
</script>
</body>
</html>
